#!/usr/bin/python
"""
""Client for Zappy in /home/haz3/projet/zappy-poney/client
"" 
"" Made by Maxime Wojciak
"" Login   <wojcia_m@epitech.net>
"" 
"" Started on  Mon May 27 16:51:27 2013 Maxime Wojciak
"" Last update Fri May 31 19:16:56 2013 Maxime Wojciak
"""

import sfml as sf
import socket
import sys

def music():
#play music
    music = sf.Music.from_file("contact.wav")
    music.play()

def gereKey():
    if sf.Keyboard.is_key_pressed(sf.Keyboard.LEFT):
        print "gauche"
    elif sf.Keyboard.is_key_pressed(sf.Keyboard.RIGHT):
        print "droite"
    elif sf.Keyboard.is_key_pressed(sf.Keyboard.UP):
        print "haut"
    elif sf.Keyboard.is_key_pressed(sf.Keyboard.DOWN):
        print "bas"

def mainWindow():
    texture = sf.Texture.from_file("jolie.jpg")
    sprite = sf.Sprite(texture)
    rectangle = sf.Rectangle((10, 20), (0, 0))
    window = sf.RenderWindow(sf.VideoMode(640, 480), "Client")
# start the game loop
    while window.is_open:
	for event in window.events:
# close window: exit
	    if type(event) is sf.CloseEvent:
		window.close()
	    if type(event) is sf.KeyEvent and event.code is sf.Keyboard.ESCAPE:
		window.close()
	    gereKey()
	window.clear() # clear screen
	window.draw(sprite) # draw the sprite
	window.display() # update the window

def init_connect():
    HOST = "localhost"
    if (len(sys.argv) == 5):
        i = 1
        while i < len(sys.argv):
            if sys.argv[i] == "-n":
                TEAM = sys.argv[i + 1]
	    elif sys.argv[i] == "-p":
                PORT = int(sys.argv[i + 1])
            i = i + 2
 	print "Nom d'equipe: " + TEAM
	print "Hote: " + HOST
	print "Port: " + str(PORT)
	sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
	try:
	    sock.connect((HOST, PORT))
	except socket.error:
	    exit()
	print "Connexion etablie avec le serveur"
	query = "Yoooo C'est le Rap du Ratz !!"
	sock.send(query)
    elif (len(sys.argv) == 7):
	i = 1
        while i < len(sys.argv):
            if sys.argv[i] == "-n":
                TEAM = sys.argv[i + 1]
            elif sys.argv[i] == "-h":
                HOST = sys.argv[i + 1]
	    elif sys.argv[i] == "-p":
                PORT = int(sys.argv[i + 1])
            i = i + 2
	print "Nom d'equipe: " + TEAM
	print "Hote: " + HOST
	print "Port: " + str(PORT)
	sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
	try:
	    sock.connect((HOST, PORT))
	except socket.error:
	    exit()
	print "Connexion etablie avec le serveur"
	query = "Yoooo C'est le Rap du Ratz !!"
	sock.send(query)
    else:
	print "USAGE: ./Client [-h hote] [-n equipe] [-p port]"
	exit()

def main():
    try:
	init_connect()
	music()
	mainWindow()
    except IOError: exit(1)
main()
